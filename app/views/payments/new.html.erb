<div class="max-w-2xl mx-auto p-6 bg-white rounded-lg shadow-md mt-10" data-turbo-permanent id="payment-wizard-container">
  <!-- Single progress bar -->
  <div class="flex mb-8 relative">
    <div class="flex-1 relative">
      <div class="w-8 h-8 bg-blue-500 text-white rounded-full mx-auto flex items-center justify-center border-2 border-blue-500">1</div>
      <p class="text-center text-xs mt-1">Personal</p>
    </div>
    <div class="flex-1 relative">
      <div class="w-8 h-8 bg-gray-200 text-gray-600 rounded-full mx-auto flex items-center justify-center border-2 border-gray-200">2</div>
      <p class="text-center text-xs mt-1">Amount</p>
    </div>
    <div class="flex-1 relative">
      <div class="w-8 h-8 bg-gray-200 text-gray-600 rounded-full mx-auto flex items-center justify-center border-2 border-gray-200">3</div>
      <p class="text-center text-xs mt-1">Payment</p>
    </div>
    <div class="flex-1 relative">
      <div class="w-8 h-8 bg-gray-200 text-gray-600 rounded-full mx-auto flex items-center justify-center border-2 border-gray-200">4</div>
      <p class="text-center text-xs mt-1">Review</p>
    </div>
    <!-- Line connecting steps -->
    <div class="absolute top-4 left-0 w-full h-0.5 bg-gray-200 -z-10"></div>
  </div>

  <!-- Steps content -->
  <div id="payment-form-wizard">
    <!-- Step 1: Personal Information -->
    <div class="block py-5" id="step-1">
      <h2 class="text-2xl font-bold mb-6">Personal Information</h2>
      <div class="mb-5">
        <label for="first_name" class="block mb-2 font-medium">First Name</label>
        <input type="text" id="first_name" name="first_name" class="w-full p-3 border border-gray-300 rounded-md" required>
      </div>
      <div class="mb-5">
        <label for="last_name" class="block mb-2 font-medium">Last Name</label>
        <input type="text" id="last_name" name="last_name" class="w-full p-3 border border-gray-300 rounded-md" required>
      </div>
      <div class="flex justify-end mt-8">
        <button type="button" id="next-to-2" class="py-3 px-5 bg-blue-500 text-white rounded-md font-semibold">Next</button>
      </div>
    </div>

    <!-- Step 2: Amount -->
    <div class="hidden py-5" id="step-2">
      <h2 class="text-2xl font-bold mb-6">Payment Amount</h2>
      <div class="mb-5">
        <label for="amount" class="block mb-2 font-medium">Amount (in cents)</label>
        <input type="number" id="amount" name="amount" class="w-full p-3 border border-gray-300 rounded-md" min="1" required>
      </div>
      <div class="flex justify-between mt-8">
        <button type="button" id="prev-to-1" class="py-3 px-5 bg-gray-100 text-gray-700 rounded-md font-semibold">Back</button>
        <button type="button" id="next-to-3" class="py-3 px-5 bg-blue-500 text-white rounded-md font-semibold">Next</button>
      </div>
    </div>

    <!-- Step 3: Payment Method -->
    <div class="hidden py-5" id="step-3">
      <h2 class="text-2xl font-bold mb-6">Payment Method</h2>
      <div class="mb-5">
        <label for="card-element" class="block mb-2 font-medium">Credit or debit card</label>
        <div id="card-element" class="w-full p-3 border border-gray-300 rounded-md"></div>
        <div id="card-errors" class="text-red-500 mt-1 text-sm"></div>
      </div>
      <div class="flex justify-between mt-8">
        <button type="button" id="prev-to-2" class="py-3 px-5 bg-gray-100 text-gray-700 rounded-md font-semibold">Back</button>
        <button type="button" id="next-to-4" class="py-3 px-5 bg-blue-500 text-white rounded-md font-semibold">Next</button>
      </div>
    </div>

    <!-- Step 4: Review -->
    <div class="hidden py-5" id="step-4">
      <h2 class="text-2xl font-bold mb-6">Review Your Information</h2>
      <div class="bg-gray-50 p-4 rounded-lg mb-6">
        <div class="mb-5 border-b border-gray-100 pb-3">
          <h3 class="text-lg font-semibold mb-2">Personal Information</h3>
          <p><strong>Name:</strong> <span id="review-name" class="ml-2"></span></p>
        </div>
        <div class="mb-5 border-b border-gray-100 pb-3">
          <h3 class="text-lg font-semibold mb-2">Amount</h3>
          <p><strong>Total:</strong> <span class="ml-2">$<span id="review-amount"></span></span></p>
        </div>
        <div class="mb-5 border-b border-gray-100 pb-3">
          <h3 class="text-lg font-semibold mb-2">Payment Method</h3>
          <p>Credit Card <span id="review-card-last4" class="font-mono"></span>)</p>
        </div>
      </div>
      <div class="flex justify-between mt-8">
        <button type="button" id="prev-to-3" class="py-3 px-5 bg-gray-100 text-gray-700 rounded-md font-semibold">Back</button>
        <button type="button" id="submit-payment" class="py-3 px-5 bg-green-500 text-white rounded-md font-semibold">Complete Payment</button>
      </div>
    </div>
  </div>
</div>

<%= javascript_include_tag "https://js.stripe.com/v3/", "data-turbo-track": "reload" %>
<%= javascript_include_tag "controllers/payments_controller" %>
